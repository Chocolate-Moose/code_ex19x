<!DOCTYPE html>
<html lang="en">


<head>
  <title>Last Chances 19X</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script>
    $(function () {
      var availableTags = [];
      $.getJSON("/names.json", function(json){
        for(var i = 0; i < json.length; i ++){
          if(json[i]["legal_name"]!== null){
            availableTags.push(json[i]["legal_name"]);
          }  
        }
      });
      $("#input-box").autocomplete({
        source: availableTags,
        minLength: 3
      });

      $.ui.autocomplete.filter = function (array, term) {
        var regTab = term.split(" ");
        var regex = regTab.join('[\\w ]*');
        var matcher = new RegExp("^" + regex, "i");
        return $.grep(array, function (value) {
          return matcher.test(value.label || value.value || value);
        });
      };
    });
  </script>
</head>

<body>
  <h1>19X - <i>SUMMER LOVIN'</i></h1>
  <h2>LOGGED IN AS <%= user %> <a href='/logout'>LOGOUT</a></h2>
  <p>Your picks are kept private unless you are matched. Matches are done by a compter program. Concerns? Questions?
    <b>lastchances19x@gmail.com</b></p>
  <h3><b>HOW TO USE:</b></h3>
  <ol>
    <li>Enter names in the boxes, then press <b>submit</b>!</li>
    <li>You will be taken to a page suggesting <b>full names</b> underneath each box based on the original entry.</li>
    <li>For each crush, click the <b>link</b> containing the name as it appears in the <b>DND</b>, then hit
      <b>submit</b> once more!</li>
  </ol>
  <p><b>Crush entries cannot be deleted. Choose Carefully!</b></p>
  <p> There are <%= crushes %> people crushing on you!</p>
  <button class="btn" id="crush-btn" type="button" onClick=showCrushes()>
    VIEW YOUR CRUSHES
  </button>
  <div id="crush-list" class="hide">
    <% if (crush_list.length > 0) { %>
    <% for (var i = 0; i < crush_list.length; i++) { %>
    <p><%= crush_list[i] %></p>
    <%}} else {%>
    <p> You haven't crushed on anyone yet!</p>
    <% } %>

  </div>

  <button class="btn" id="match-btn" type="button" onClick=showMatches()>
    VIEW YOUR MATCHES
  </button>
  <div id="match-list" class="hide">
    <% if (match_list.length > 0) { %>
    <% for (var i = 0; i < match_list.length; i++) { %>
    <p><%= match_list[i] %></p>
    <%}} else {%>
    <p> You haven't matched with anyone yet -- keep crushing on people!</p>
    <% } %>

  </div>


  <form id="entries-form" method="post" action="/crushes">

    <div id="entries-container">
      <div class="row">
        <p class="col-sm-4 col-sm-offset-4">
          <div class="ui-widget"></div>
          <input id="input-box" class="form-control" type="text" list="huge_list" name="entry"
            placeholder="Philip J. Hanlon">
      </div>
      </p>
    </div>
    <div id="suggested-name-container" class="hide">
      <a></a>
    </div>
    <!--                     
                            <div class="row" style="margin-bottom:8px;">
                              <div class="g-recaptcha col-sm-4 col-sm-offset-4"
                                data-sitekey="6Lcd-gcTAAAAALEa5oV92jQvn6TwzqX5eVCxm3MF"></div>
                            </div> -->


    <div class="row">
      <div class="col-sm-4 col-sm-offset-4">
        <input id="submit" type="submit" class="btn btn-primary">
      </div>
    </div>
  </form>
  </div>
  <script>
    function showCrushes() {
      var x = document.getElementById("crush-list");
      x.classList.toggle("show");
      var y = document.getElementById("match-list");
      y.classList = "hide";

    }
    function showMatches() {
      var x = document.getElementById("match-list");
      x.classList.toggle("show");
      var y = document.getElementById("crush-list");
      y.classList = "hide";
    }


  </script>
</body>

</html>